<!DOCTYPE html>
<html>
<head>
	<title>Ludum Dare 34 - Level Editor</title>
	<style>
		#grid { float:left; position: relative; }
		.square { border:1px solid #000; float:left; height:32px; width:32px; }
		.clear { float:left; clear:both; }
		#output-wrap { float:left; }
		#output { float:left; height: 440px; position: relative; width:640px; margin-left:10px; }
	</style>
	<script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="js/bretter.js"></script>
	<script type="text/javascript" src="js/main.js"></script>


	<script type="text/javascript">

	var stageObject = {"level_id":0,"stage_id":0,"images":[],"textures":[],"sounds":[],"objects":[]}

	function buildGrid() {
		for(y = 0; y <= 400; y = y + 32) {
			for(x = 0; x <= 600; x = x + 32) {
				$("#grid").append("<div class='square' data-x='"+x+"' data-y='"+y+"'></div>");
			}
			$("#grid").append("<div class='clear'></div>");
		}
		$(".square").click(function() {
			stageObject.objects.push({
				"shader": "default",
				"texture": "tile-blue-texture",
				"position": [$(this).data("x"),$(this).data("y")],
				"size": [64,64],
				"static": true
			})
			$("#output").val(JSON.stringify(stageObject))
		});
	}

	function generate() {

	}

	window.onload = function() {
		buildGrid()
		$("#output").val(JSON.stringify(stageObject))
	}
	</script>

</head>
<body>
	<div id="grid"></div>
	<div id="output-wrap">
		<textarea id="output"></textarea>	
	</div>
</body>
</html>